# ğŸ—ï¸ FE-Auto-Factory æ¶æ„è¯¦è§£

## è®¾è®¡å“²å­¦

> **Schema æ˜¯å”¯ä¸€çœŸç›¸æ¥æºï¼ˆSingle Source of Truthï¼‰**
> ä»éœ€æ±‚åˆ†æåˆ°ä»£ç ç”Ÿæˆï¼Œå†åˆ°æµ‹è¯•å’Œç›‘æ§ï¼Œæ‰€æœ‰é˜¶æ®µéƒ½ä»¥ Page Schema ä¸ºæ ¸å¿ƒé©±åŠ¨ã€‚

---

## æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FE-Auto-Factory                              â”‚
â”‚                      å‰ç«¯è‡ªåŠ¨åŒ–å·¥å‚ä½“ç³»                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        PRDæ–‡æ¡£                                        ç›‘æ§æ•°æ®
           â”‚                                              â”‚
           â–¼                                              â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Skill-01    â”‚â—„â”€â”€â”€â”€â”€â”€â”€ AI å‘¨æŠ¥é—­ç¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Skill-04    â”‚
   â”‚  éœ€æ±‚åˆ†æ    â”‚                              â”‚  éƒ¨ç½²&é—­ç¯   â”‚
   â”‚  Schemaé©±åŠ¨  â”‚                              â”‚  Sentry+åŸ‹ç‚¹ â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Page Schema YAML                            â”‚ éƒ¨ç½²
          â–¼                                       â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      æµ‹è¯•æŠ¥å‘Š                 â”‚  CI/CD     â”‚
   â”‚  Skill-02    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º            â”‚  Pipeline  â”‚
   â”‚  è‡ªåŠ¨åŒ–å¼€å‘  â”‚                  â”‚            â””â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜
   â”‚  ä»£ç ç”Ÿæˆ    â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”           â”‚ å…¨ç»¿
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  Skill-03    â”‚           â”‚
          â”‚                  â”‚  è‡ªåŠ¨åŒ–æµ‹è¯•  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ ç”Ÿæˆä»£ç          â”‚  E2E+æ€§èƒ½   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒæ•°æ®æµ

### 1. Schema â†’ å¤šç»´èµ„äº§ (v2.7+)

```yaml
# è¾“å…¥ï¼šproduct-list.schema.yaml
page_id: ProductList
features: { pagination: true, search_bar: true }
models: { Product: { id: number, name: string } }
api_endpoints: [getProductList]
```

```text
factory generate â”€â”€â–º  src/views/ProductList/index.vue        (UI å¸ƒå±€)
                  â”œâ”€â”€ src/views/ProductList/hooks/use*.ts    (ä¸šåŠ¡é€»è¾‘ä¸ç‰¹æ€§å°è£…)
                  â”œâ”€â”€ src/api/product-list.ts               (API è¯·æ±‚ä¸ç±»å‹æ³¨å…¥)
                  â”œâ”€â”€ src/api/types/product-list.ts         (TS æ¥å£å®šä¹‰)
                  â”œâ”€â”€ src/store/product-list.ts             (Pinia çŠ¶æ€ç®¡ç†)
                  â”œâ”€â”€ mock/product-list.mock.ts             (è‡ªåŠ¨åŒ– Mock æœåŠ¡)
                  â””â”€â”€ tests/e2e/product-list.spec.ts        (Playwright æµ‹è¯•)
```

### 2. ä»£ç  â†’ æµ‹è¯•

```
ç”Ÿæˆçš„ E2E æµ‹è¯•è„šæœ¬  â”€â”€â–º  Playwright æ‰§è¡Œ  â”€â”€â–º  æµ‹è¯•æŠ¥å‘Š
ç”Ÿæˆçš„ Hook        â”€â”€â–º  Vitest å•å…ƒæµ‹è¯•  â”€â”€â–º  è¦†ç›–ç‡æŠ¥å‘Š
ç”Ÿæˆçš„é¡µé¢         â”€â”€â–º  Lighthouse CI   â”€â”€â–º  æ€§èƒ½æŠ¥å‘Š
```

### 3. ä¸Šçº¿ â†’ é—­ç¯

```
ç”Ÿäº§ç¯å¢ƒ â”€â”€â–º Sentry é”™è¯¯æ”¶é›† â”€â”€â–º AI åˆ†æ â”€â”€â–º å‘¨æŠ¥æ–‡æ¡£ â”€â”€â–º ä¸‹ä¸€è½® Skill-01
          â””â–º åŸ‹ç‚¹æ•°æ®é‡‡é›† â”€â”€â–º/
          â””â–º Lighthouse è¶‹åŠ¿ â”€â”€â–º/
```

---

## ç›®å½•èŒè´£è¯´æ˜

| ç›®å½• | èŒè´£ | è¢«è°æ¶ˆè´¹ |
|------|------|---------|
| `skills/01-requirements/` | éœ€æ±‚åˆ†ææŒ‡å—ã€PRD æ¨¡æ¿ | äººç±»å¼€å‘è€… + Agent |
| `skills/02-development/` | ä»£ç ç”Ÿæˆè§„èŒƒã€æœ€ä½³å®è·µ | factory generate å‘½ä»¤ |
| `skills/03-testing/` | æµ‹è¯•ç­–ç•¥ã€E2E è§„èŒƒ | factory test å‘½ä»¤ |
| `skills/04-deployment/` | CI/CD æµç¨‹ã€ç›‘æ§é…ç½® | GitHub Actions |
| `scripts/factory.js` | ä¸» CLI å…¥å£ (v2.7) | å¼€å‘è€…å‘½ä»¤è¡Œ |
| `scripts/generators/` | å¤šç«¯é€‚é…å™¨é©±åŠ¨ (Vant/Element/React) | factory generate å‘½ä»¤ |
| `scripts/utils/schema.js` | Schema è§£æä¸ $ref å¤„ç† | factory generate å‘½ä»¤ |
| `.factory/models/` | [v2.6] å…¨å±€å…±äº«æ•°æ®æ¨¡å‹æ±  | factory generate å‘½ä»¤ |
| `schemas/pages/` | ä¸šåŠ¡æ„æ¶å›¾çº¸åº“ (YAML) | å¼€å‘è€…æ ¸å¿ƒèµ„äº§ |
| `rules/fe-factory-rules.js` | è‡ªå®šä¹‰ ESLint è§„åˆ™ | é¡¹ç›® eslint.config.js |
| `telemetry/tracker.ts` | å£°æ˜å¼åŸ‹ç‚¹ç³»ç»Ÿ | é¡¹ç›® main.ts |
| `tests/playwright.config.ts` | E2E æµ‹è¯•é…ç½® | Playwright |
| `tests/ci.yml` | CI/CD æµæ°´çº¿ | GitHub Actions |
| `.agent/workflows/` | Agent æ ‡å‡†åŒ–å·¥ä½œæµ | AI Agent |

---

## Skill è°ƒç”¨é“¾

```
å¼€å‘è€…éœ€æ±‚
    â”‚
    â”œâ”€â–º é˜…è¯» skills/01-requirements/SKILL.md
    â”‚       â””â”€â–º åˆ›å»º PRD Markdown + Page Schema
    â”‚
    â”œâ”€â–º è¿è¡Œ factory generate --schema <schema>
    â”‚       â””â”€â–º è°ƒç”¨ skills/02-development/SKILL.md è§„èŒƒ
    â”‚           â””â”€â–º ç”Ÿæˆ Vue + Hook + API + Store + Test
    â”‚
    â”œâ”€â–º å¡«å†™ TODO ä¸šåŠ¡é€»è¾‘
    â”‚
    â”œâ”€â–º è¿è¡Œ factory validate
    â”‚       â””â”€â–º ESLint(rules/) + TypeCheck + Schemaæ ¡éªŒ
    â”‚
    â”œâ”€â–º git push â†’ CI Pipeline (tests/ci.yml)
    â”‚       â””â”€â–º è°ƒç”¨ skills/03-testing/SKILL.md è§„èŒƒ
    â”‚           â””â”€â–º Unit + E2E + Visual + Lighthouse
    â”‚
    â””â”€â–º è‡ªåŠ¨éƒ¨ç½² â†’ ç›‘æ§å¯åŠ¨
            â””â”€â–º è°ƒç”¨ skills/04-deployment/SKILL.md è§„èŒƒ
                â””â”€â–º Sentry + Tracker + AIå‘¨æŠ¥ â†’ é—­ç¯
```

---

## å…³é”®è®¾è®¡å†³ç­–

### 1. ä¸ºä»€ä¹ˆé€‰æ‹© YAML Schema è€Œéä»£ç é…ç½®ï¼Ÿ
- **å¯è¯»æ€§**ï¼šäº§å“ç»ç†ä¹Ÿèƒ½ç†è§£å’Œå¡«å†™
- **å·¥å…·å‹å¥½**ï¼šå¯è¢« AI è§£æå’Œæ ¡éªŒ
- **ç‰ˆæœ¬è¿½è¸ª**ï¼šSchema å˜æ›´å¯ä»¥ git diff

### 2. ä¸ºä»€ä¹ˆä¸ç”¨å®Œæ•´çš„ OpenAPI codegenï¼Ÿ
- **æ¸è¿›å¢å¼º**ï¼š`factory sync --swagger` å¯ä»¥å¢é‡å¼•å…¥
- **å›¢é˜Ÿé€‚é…**ï¼šä¸å¼ºä¾èµ–åç«¯æä¾›è§„èŒƒæ–‡æ¡£
- **å¿«é€Ÿå¯åŠ¨**ï¼šMVP é˜¶æ®µä¼˜å…ˆè·‘é€šï¼Œå†ç²¾ç»†åŒ–

### 3. ä¸ºä»€ä¹ˆ E2E ç”± Schema è‡ªåŠ¨ç”Ÿæˆï¼Ÿ
- **é™ä½å¿ƒç†è´Ÿæ‹…**ï¼šå¼€å‘è€…ä¸éœ€è¦"ä»é›¶å†™æµ‹è¯•"
- **ä¿è¯è¦†ç›–**ï¼šæ¯ä¸ªé¡µé¢çš„æ ¸å¿ƒè·¯å¾„è‡ªåŠ¨æœ‰æµ‹è¯•
- **å‡å°‘é—æ¼**ï¼šåŸºäº User Story ç”Ÿæˆï¼Œè€Œéå‡­æ„Ÿè§‰

### 4. ä¸ºä»€ä¹ˆç”¨å£°æ˜å¼åŸ‹ç‚¹è€Œéæ‰‹åŠ¨åŸ‹ç‚¹ï¼Ÿ
- **é›¶ä¾µå…¥**ï¼šä¸šåŠ¡ä»£ç ä¸éœ€è¦ import åŸ‹ç‚¹ SDK
- **è§„èŒƒç»Ÿä¸€**ï¼štrack-id å‘½ååœ¨ Schema ä¸­é¢„å®šä¹‰
- **é˜²é—æ¼**ï¼šESLint è§„åˆ™æ£€æŸ¥ `require-data-track-id`
